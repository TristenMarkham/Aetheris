{"ast":null,"code":"var _s = $RefreshSig$();\n// src/hooks/useChat.js\nimport { useState, useCallback, useRef, useEffect } from 'react';\nconst API_BASE = process.env.REACT_APP_API_URL || 'http://localhost:3000';\nexport const useChat = () => {\n  _s();\n  const [messages, setMessages] = useState([]);\n  const [isLoading, setIsLoading] = useState(false);\n  const [pendingConfirmation, setPendingConfirmation] = useState(null);\n  const [isWaitingForConfirmation, setIsWaitingForConfirmation] = useState(false);\n  const [showHistory, setShowHistory] = useState(false);\n  const [allHistory, setAllHistory] = useState([]);\n  const messagesEndRef = useRef(null);\n\n  // Auto-scroll to bottom when new messages arrive\n  const scrollToBottom = useCallback(() => {\n    var _messagesEndRef$curre;\n    (_messagesEndRef$curre = messagesEndRef.current) === null || _messagesEndRef$curre === void 0 ? void 0 : _messagesEndRef$curre.scrollIntoView({\n      behavior: 'smooth'\n    });\n  }, []);\n  useEffect(() => {\n    scrollToBottom();\n  }, [messages, scrollToBottom]);\n\n  // Start with empty chat - no automatic history loading\n  useEffect(() => {\n    console.log('ðŸ’¬ Chat initialized - starting fresh');\n    setMessages([]);\n  }, []);\n\n  // Load chat history manually when requested\n  const loadChatHistory = useCallback(async (maxMessages = 20) => {\n    try {\n      console.log('ðŸ”„ Loading chat history on request...');\n      const response = await fetch(`${API_BASE}/api/chat/history`);\n      if (!response.ok) {\n        throw new Error(`HTTP ${response.status}: ${response.statusText}`);\n      }\n      const history = await response.json();\n      console.log('ðŸ“œ Chat history loaded:', history.length, 'messages');\n\n      // Transform and limit messages\n      const transformedHistory = Array.isArray(history) ? history.slice(-maxMessages) // Take last N messages\n      .map(msg => ({\n        role: msg.sender === 'user' ? 'user' : 'assistant',\n        content: msg.message || '',\n        timestamp: msg.timestamp,\n        id: msg.id || Date.now() + Math.random(),\n        sender: msg.sender,\n        isHistorical: true // Mark as historical messages\n      })) : [];\n\n      // Replace current messages with historical messages\n      setMessages(transformedHistory);\n      setAllHistory(transformedHistory);\n      setShowHistory(true);\n      console.log('âœ… Chat history loaded:', transformedHistory.length, 'messages');\n      return transformedHistory;\n    } catch (error) {\n      console.error('âŒ Failed to load chat history:', error);\n      return [];\n    }\n  }, []);\n\n  // Clear all messages and start fresh\n  const startFreshChat = useCallback(() => {\n    setMessages([]);\n    setAllHistory([]);\n    setShowHistory(false);\n    setPendingConfirmation(null);\n    setIsWaitingForConfirmation(false);\n    console.log('ðŸ†• Started fresh chat');\n  }, []);\n\n  // Send message to chat API\n  const sendMessage = useCallback(async (messageText, isConfirmation = false) => {\n    if (!messageText.trim() && !isConfirmation) return;\n    console.log('ðŸ“¤ Sending message:', messageText);\n    const userMessage = {\n      role: 'user',\n      content: messageText,\n      timestamp: new Date().toISOString(),\n      id: Date.now(),\n      sender: 'user'\n    };\n\n    // Add user message to chat immediately\n    if (!isConfirmation) {\n      setMessages(prev => [...prev, userMessage]);\n    }\n    setIsLoading(true);\n    try {\n      const response = await fetch(`${API_BASE}/api/chat`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          message: messageText,\n          userId: 'tristen',\n          companyId: 'Markham Investigation & Protection'\n        })\n      });\n      if (!response.ok) {\n        throw new Error(`HTTP ${response.status}: ${response.statusText}`);\n      }\n      const result = await response.json();\n      console.log('ðŸ“¥ Chat response:', result);\n\n      // Handle confirmation requests\n      if (result.requiresConfirmation) {\n        setPendingConfirmation(result.confirmationData);\n        setIsWaitingForConfirmation(true);\n        const confirmationMessage = {\n          role: 'assistant',\n          content: result.message,\n          timestamp: new Date().toISOString(),\n          id: Date.now() + 1,\n          requiresConfirmation: true,\n          sender: 'aetheris'\n        };\n        setMessages(prev => [...prev, confirmationMessage]);\n      } else {\n        // Regular response\n        const assistantMessage = {\n          role: 'assistant',\n          content: result.message || 'No response received',\n          timestamp: result.timestamp || new Date().toISOString(),\n          id: Date.now() + 1,\n          sender: 'aetheris'\n        };\n        setMessages(prev => [...prev, assistantMessage]);\n\n        // Clear any pending confirmations\n        setPendingConfirmation(null);\n        setIsWaitingForConfirmation(false);\n      }\n    } catch (error) {\n      console.error('âŒ Chat error:', error);\n      const errorMessage = {\n        role: 'assistant',\n        content: 'Sorry, I encountered an error. Please try again.',\n        timestamp: new Date().toISOString(),\n        id: Date.now() + 1,\n        error: true,\n        sender: 'aetheris'\n      };\n      setMessages(prev => [...prev, errorMessage]);\n    } finally {\n      setIsLoading(false);\n    }\n  }, []);\n\n  // Handle confirmation responses\n  const handleConfirmation = useCallback(async confirmed => {\n    if (!pendingConfirmation) return;\n    const confirmationText = confirmed ? 'yes' : 'no';\n\n    // Add user's confirmation to chat\n    const confirmationMessage = {\n      role: 'user',\n      content: `Confirmation: ${confirmationText}`,\n      timestamp: new Date().toISOString(),\n      id: Date.now(),\n      isConfirmation: true,\n      sender: 'user'\n    };\n    setMessages(prev => [...prev, confirmationMessage]);\n\n    // Send confirmation to backend\n    await sendMessage(confirmationText, true);\n\n    // Clear confirmation state\n    setPendingConfirmation(null);\n    setIsWaitingForConfirmation(false);\n  }, [pendingConfirmation, sendMessage]);\n\n  // Cancel pending confirmation\n  const cancelConfirmation = useCallback(() => {\n    setPendingConfirmation(null);\n    setIsWaitingForConfirmation(false);\n    const cancelMessage = {\n      role: 'assistant',\n      content: 'Action cancelled.',\n      timestamp: new Date().toISOString(),\n      id: Date.now(),\n      sender: 'aetheris'\n    };\n    setMessages(prev => [...prev, cancelMessage]);\n  }, []);\n  return {\n    messages,\n    isLoading,\n    pendingConfirmation,\n    isWaitingForConfirmation,\n    messagesEndRef,\n    showHistory,\n    allHistory,\n    sendMessage,\n    handleConfirmation,\n    cancelConfirmation,\n    loadChatHistory,\n    startFreshChat,\n    clearChat: startFreshChat // Alias for backward compatibility\n  };\n};\n_s(useChat, \"jCAvbydzuOsvJk4P1hJqCBeLEIQ=\");","map":{"version":3,"names":["useState","useCallback","useRef","useEffect","API_BASE","process","env","REACT_APP_API_URL","useChat","_s","messages","setMessages","isLoading","setIsLoading","pendingConfirmation","setPendingConfirmation","isWaitingForConfirmation","setIsWaitingForConfirmation","showHistory","setShowHistory","allHistory","setAllHistory","messagesEndRef","scrollToBottom","_messagesEndRef$curre","current","scrollIntoView","behavior","console","log","loadChatHistory","maxMessages","response","fetch","ok","Error","status","statusText","history","json","length","transformedHistory","Array","isArray","slice","map","msg","role","sender","content","message","timestamp","id","Date","now","Math","random","isHistorical","error","startFreshChat","sendMessage","messageText","isConfirmation","trim","userMessage","toISOString","prev","method","headers","body","JSON","stringify","userId","companyId","result","requiresConfirmation","confirmationData","confirmationMessage","assistantMessage","errorMessage","handleConfirmation","confirmed","confirmationText","cancelConfirmation","cancelMessage","clearChat"],"sources":["C:/Users/onetr/OneDrive/Desktop/universal-business-platform/universal-business-platform/frontend/src/hooks/useChat.js"],"sourcesContent":["// src/hooks/useChat.js\r\nimport { useState, useCallback, useRef, useEffect } from 'react';\r\n\r\nconst API_BASE = process.env.REACT_APP_API_URL || 'http://localhost:3000';\r\n\r\nexport const useChat = () => {\r\n  const [messages, setMessages] = useState([]);\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const [pendingConfirmation, setPendingConfirmation] = useState(null);\r\n  const [isWaitingForConfirmation, setIsWaitingForConfirmation] = useState(false);\r\n  const [showHistory, setShowHistory] = useState(false);\r\n  const [allHistory, setAllHistory] = useState([]);\r\n  const messagesEndRef = useRef(null);\r\n\r\n  // Auto-scroll to bottom when new messages arrive\r\n  const scrollToBottom = useCallback(() => {\r\n    messagesEndRef.current?.scrollIntoView({ behavior: 'smooth' });\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    scrollToBottom();\r\n  }, [messages, scrollToBottom]);\r\n\r\n  // Start with empty chat - no automatic history loading\r\n  useEffect(() => {\r\n    console.log('ðŸ’¬ Chat initialized - starting fresh');\r\n    setMessages([]);\r\n  }, []);\r\n\r\n  // Load chat history manually when requested\r\n  const loadChatHistory = useCallback(async (maxMessages = 20) => {\r\n    try {\r\n      console.log('ðŸ”„ Loading chat history on request...');\r\n      const response = await fetch(`${API_BASE}/api/chat/history`);\r\n      \r\n      if (!response.ok) {\r\n        throw new Error(`HTTP ${response.status}: ${response.statusText}`);\r\n      }\r\n      \r\n      const history = await response.json();\r\n      console.log('ðŸ“œ Chat history loaded:', history.length, 'messages');\r\n      \r\n      // Transform and limit messages\r\n      const transformedHistory = Array.isArray(history) ? history\r\n        .slice(-maxMessages) // Take last N messages\r\n        .map(msg => ({\r\n          role: msg.sender === 'user' ? 'user' : 'assistant',\r\n          content: msg.message || '',\r\n          timestamp: msg.timestamp,\r\n          id: msg.id || Date.now() + Math.random(),\r\n          sender: msg.sender,\r\n          isHistorical: true // Mark as historical messages\r\n        })) : [];\r\n      \r\n      // Replace current messages with historical messages\r\n      setMessages(transformedHistory);\r\n      setAllHistory(transformedHistory);\r\n      setShowHistory(true);\r\n      \r\n      console.log('âœ… Chat history loaded:', transformedHistory.length, 'messages');\r\n      return transformedHistory;\r\n    } catch (error) {\r\n      console.error('âŒ Failed to load chat history:', error);\r\n      return [];\r\n    }\r\n  }, []);\r\n\r\n  // Clear all messages and start fresh\r\n  const startFreshChat = useCallback(() => {\r\n    setMessages([]);\r\n    setAllHistory([]);\r\n    setShowHistory(false);\r\n    setPendingConfirmation(null);\r\n    setIsWaitingForConfirmation(false);\r\n    console.log('ðŸ†• Started fresh chat');\r\n  }, []);\r\n\r\n  // Send message to chat API\r\n  const sendMessage = useCallback(async (messageText, isConfirmation = false) => {\r\n    if (!messageText.trim() && !isConfirmation) return;\r\n\r\n    console.log('ðŸ“¤ Sending message:', messageText);\r\n\r\n    const userMessage = {\r\n      role: 'user',\r\n      content: messageText,\r\n      timestamp: new Date().toISOString(),\r\n      id: Date.now(),\r\n      sender: 'user'\r\n    };\r\n\r\n    // Add user message to chat immediately\r\n    if (!isConfirmation) {\r\n      setMessages(prev => [...prev, userMessage]);\r\n    }\r\n\r\n    setIsLoading(true);\r\n\r\n    try {\r\n      const response = await fetch(`${API_BASE}/api/chat`, {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n        },\r\n        body: JSON.stringify({\r\n          message: messageText,\r\n          userId: 'tristen',\r\n          companyId: 'Markham Investigation & Protection'\r\n        })\r\n      });\r\n\r\n      if (!response.ok) {\r\n        throw new Error(`HTTP ${response.status}: ${response.statusText}`);\r\n      }\r\n\r\n      const result = await response.json();\r\n      console.log('ðŸ“¥ Chat response:', result);\r\n      \r\n      // Handle confirmation requests\r\n      if (result.requiresConfirmation) {\r\n        setPendingConfirmation(result.confirmationData);\r\n        setIsWaitingForConfirmation(true);\r\n        \r\n        const confirmationMessage = {\r\n          role: 'assistant',\r\n          content: result.message,\r\n          timestamp: new Date().toISOString(),\r\n          id: Date.now() + 1,\r\n          requiresConfirmation: true,\r\n          sender: 'aetheris'\r\n        };\r\n        \r\n        setMessages(prev => [...prev, confirmationMessage]);\r\n      } else {\r\n        // Regular response\r\n        const assistantMessage = {\r\n          role: 'assistant',\r\n          content: result.message || 'No response received',\r\n          timestamp: result.timestamp || new Date().toISOString(),\r\n          id: Date.now() + 1,\r\n          sender: 'aetheris'\r\n        };\r\n        \r\n        setMessages(prev => [...prev, assistantMessage]);\r\n        \r\n        // Clear any pending confirmations\r\n        setPendingConfirmation(null);\r\n        setIsWaitingForConfirmation(false);\r\n      }\r\n    } catch (error) {\r\n      console.error('âŒ Chat error:', error);\r\n      \r\n      const errorMessage = {\r\n        role: 'assistant',\r\n        content: 'Sorry, I encountered an error. Please try again.',\r\n        timestamp: new Date().toISOString(),\r\n        id: Date.now() + 1,\r\n        error: true,\r\n        sender: 'aetheris'\r\n      };\r\n      \r\n      setMessages(prev => [...prev, errorMessage]);\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  }, []);\r\n\r\n  // Handle confirmation responses\r\n  const handleConfirmation = useCallback(async (confirmed) => {\r\n    if (!pendingConfirmation) return;\r\n\r\n    const confirmationText = confirmed ? 'yes' : 'no';\r\n    \r\n    // Add user's confirmation to chat\r\n    const confirmationMessage = {\r\n      role: 'user',\r\n      content: `Confirmation: ${confirmationText}`,\r\n      timestamp: new Date().toISOString(),\r\n      id: Date.now(),\r\n      isConfirmation: true,\r\n      sender: 'user'\r\n    };\r\n    \r\n    setMessages(prev => [...prev, confirmationMessage]);\r\n    \r\n    // Send confirmation to backend\r\n    await sendMessage(confirmationText, true);\r\n    \r\n    // Clear confirmation state\r\n    setPendingConfirmation(null);\r\n    setIsWaitingForConfirmation(false);\r\n  }, [pendingConfirmation, sendMessage]);\r\n\r\n  // Cancel pending confirmation\r\n  const cancelConfirmation = useCallback(() => {\r\n    setPendingConfirmation(null);\r\n    setIsWaitingForConfirmation(false);\r\n    \r\n    const cancelMessage = {\r\n      role: 'assistant',\r\n      content: 'Action cancelled.',\r\n      timestamp: new Date().toISOString(),\r\n      id: Date.now(),\r\n      sender: 'aetheris'\r\n    };\r\n    \r\n    setMessages(prev => [...prev, cancelMessage]);\r\n  }, []);\r\n\r\n  return {\r\n    messages,\r\n    isLoading,\r\n    pendingConfirmation,\r\n    isWaitingForConfirmation,\r\n    messagesEndRef,\r\n    showHistory,\r\n    allHistory,\r\n    sendMessage,\r\n    handleConfirmation,\r\n    cancelConfirmation,\r\n    loadChatHistory,\r\n    startFreshChat,\r\n    clearChat: startFreshChat // Alias for backward compatibility\r\n  };\r\n};"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}